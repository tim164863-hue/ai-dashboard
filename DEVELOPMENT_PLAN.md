# AI 團隊儀表板 - 開發計畫

**專案背景**
- 技術棧：Next.js 16 + React 19 + TypeScript + TailwindCSS 4 + Recharts
- 後端已完成（API 路由、資料庫、OpenClaw 整合）
- 前端待開發（UI 元件、Dashboard、圖表、即時更新）

---

## 1️⃣ UI/UX 設計 - 最重要的視覺元素

### Kawa 的想法：

**核心視覺層級**
- **大數字卡片**（KPI Cards）：團隊成員數、活躍任務、完成率
  - 用顏色區分狀態（綠=健康、黃=注意、紅=警告）
  - 簡潔、一眼看懂
  
- **即時狀態指示器**（Status Badges）
  - 每個 Agent 的狀態：Online/Idle/Busy/Offline
  - 用小圓點 + 顏色 + 動畫脈衝效果
  
- **時間軸視圖**（Timeline）
  - 展示最近的活動、任務完成、錯誤事件
  - 讓用戶快速掌握「發生了什麼」

**設計原則**
- 深色主題（護眼，適合長時間監控）
- 高對比度（重要資訊一定要突出）
- 最小化滾動（首頁應該看到 80% 的關鍵資訊）

---

## 2️⃣ 資料優先級 - 首頁應該展示什麼

### 首頁佈局（優先級排序）

**第一層（最上方，必看）**
1. 團隊概況卡片
   - 總成員數 | 在線人數 | 今日完成任務數
   - 系統健康度（CPU/Memory/API 可用性）

2. 即時警告區
   - 失敗的任務
   - 超時的 Agent
   - API 錯誤率異常

**第二層（中間，重要）**
3. 任務分佈圖表
   - 按狀態分類（進行中/已完成/失敗）
   - 按優先級分類

4. Agent 活動熱力圖
   - 誰在忙？誰閒著？
   - 最近 24h 的工作量分佈

**第三層（下方，參考）**
5. 最近事件日誌
   - 最新 10 條活動記錄
   - 可點擊查看詳情

---

## 3️⃣ 互動流程 - 用戶如何瀏覽儀表板

### 推薦的用戶旅程

```
首頁（概況）
  ↓
  ├─ 點擊 KPI 卡片 → 深入該指標的詳細頁面
  ├─ 點擊 Agent 狀態 → 該 Agent 的詳細資訊 + 任務歷史
  ├─ 點擊 任務卡片 → 任務詳情 + 執行日誌
  └─ 點擊 警告 → 問題診斷頁面

側邊欄導航
  ├─ Dashboard（首頁）
  ├─ Agents（團隊成員列表）
  ├─ Tasks（任務管理）
  ├─ Analytics（分析報告）
  └─ Settings（設定）
```

### 互動細節

- **快速篩選**：首頁有 Filter 按鈕（按狀態、優先級、時間範圍）
- **搜尋功能**：全局搜尋 Agent 名稱、任務 ID、錯誤訊息
- **即時通知**：右上角通知鈴鐺，新警告會彈出
- **返回按鈕**：麵包屑導航，方便回到上一層

---

## 4️⃣ 技術考量 - Polling vs WebSocket

### Kawa 的分析

| 方面 | Polling | WebSocket |
|------|---------|-----------|
| **實時性** | 延遲 5-10s | 毫秒級 |
| **伺服器負載** | 高（頻繁請求） | 低（持久連接） |
| **客戶端複雜度** | 簡單 | 複雜（需要重連邏輯） |
| **成本** | 高（API 調用多） | 低（連接持久） |
| **適用場景** | 非關鍵更新 | 實時監控 |

### 推薦方案：混合策略 🎯

**WebSocket 用於**
- Agent 狀態變化（Online/Offline）
- 新任務到達
- 警告/錯誤事件
- 實時進度更新

**Polling 用於**
- 統計數據（每 30s 更新一次）
- 分析報告（每 5 分鐘更新）
- 非關鍵的背景資訊

**實現細節**
```typescript
// 偽代碼
const ws = new WebSocket('wss://api.example.com/live');

ws.on('agent-status-change', (data) => {
  updateAgentStatus(data);  // 即時更新
});

// Polling 用於統計
setInterval(() => {
  fetchTeamStats();  // 每 30s 更新一次
}, 30000);
```

**優勢**
- 關鍵資訊實時更新（用戶體驗好）
- 非關鍵資訊定期更新（伺服器負載低）
- 成本和效能的平衡

---

## 📋 前端開發清單

- [ ] 建立 Layout 元件（Sidebar + Main）
- [ ] 設計 KPI Card 元件
- [ ] 建立 Agent Status Badge 元件
- [ ] 整合 Recharts 圖表
- [ ] 實現 WebSocket 連接邏輯
- [ ] 實現 Polling 邏輯
- [ ] 建立詳情頁面（Agent/Task/Analytics）
- [ ] 實現搜尋和篩選功能
- [ ] 添加通知系統
- [ ] 測試和優化

---

**下一步**：Ula，你覺得這個方向如何？有什麼想調整或深入討論的嗎？🐝
